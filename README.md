# XCrawler

A股爬虫项目

- 核心逻辑1:通过财经网址获取全部股票的动态数据，并且经过分析，将日涨，日跌超过x%的股票进行筛选，按照股票的涨跌幅进行排序；通过对股票的大额买入卖出订单进行排序，并预测前10位买入卖出的之后的大概股价，并对买入卖出进行排序；并存储到数据库(DB:Mysql，需要跟进)

- 核心逻辑2:对保留到数据库的数据按照5日，20日进行分析排序，筛选出5，20日上涨，下降的前x位的股票，进行排序，并存储到数据库(DB:Mysql)

- 核心逻辑3:做T，通过股票的涨跌幅，对股票进行T操作
  1. 使用技术指标建模交易信号。比如利用布林通道、均线交叉等技术分析指标,建立买入和卖出规则。
  2. 加入风险管理作为交易决策依据。比如设置止损价格和动态调整仓位,降低单日风险。
  3. 采用复合指标相结合,避免单一依赖某一指标。比如结合MACD、KDJ等多 time frame 的指标信号。
  4. 进行回测优化,找出参数组合效果好的交易策略。优化周期、触发点设定等策略变量。
  5. 采用平滑移动平均线,避免被短期波动误导。比如用EMA作为买入信号。
  6. 重点跟踪行业领跑股票,利用行业势头。同时观察大盘走势变化。
  7. 使用量化选股条件排除个股风险,比如营收同比增长、获利能力等。
  8. 定期回顾回测结果,调整不好的交易规则。持续优化策略模型。
  9. 采取分散投资多个股票池分担风险。

部分参数解释:

- MA
  - 普通移动平均线(Moving Average):表示求x在n周期内的简单移动平均
  - 计算方法:n个时间单位移动平均线= (第1个时间单位价格+第2时间单位价格+…+第n时间单位价格)/n

- EMA(指数移动平均线 EXPMA指标)
  - 指数移动平均线指标(Exponential Moving Average):表示求x在n周期内的平滑移动平均。(指数加权)
  - 计算方法：ema(x,n)=[2*x+(n-1)*ema(n-1)]/(n+1) 其中ema(n-1)为第(n-1)个时间单位的ema值

- 5,10,20日均线
  - 5日均线:是指股票在最近5个交易日(不包括当日)内每日收盘价格的平均值。反映近期价格动向。
  - 10日均线:是指股票在最近10个交易日(不包括当日)内每日收盘价格的平均值。较5日均线则反应的周期稍长。
  - 20日均线:是指股票在最近20个交易日(不包括当日)内每日收盘价格的平均值。相对5日和10日均线,20日均线反映了价格动向的中期趋势。
  - 这三条均线使用不同交易日计算平均价格,周期从短到长。
    - 5日判断近期短中长线价格走势
    - 10日金叉与死叉形成买卖信号
    - 20日价格与不同周期均线的交叉位点形成支持 Resistance 轴。

- KDJ指标
  - KDJ指标的含义：KDJ是一个动量指标,用于衡量股票近期价格动能的强弱,并判断趋势形成的信号。

  - K值(K)
    1. 衡量最近买势与卖势的相对强度,范围0-100。
    2. K=(C-L14)/(H14-L14)*100
       - C:最近一日收盘价
       - L14:最近14日最低价
       - H14:最近14日最高价

  - D值(D)
    1. K值的简单移动平均,平滑K值的波动。
    2. 当日D = 前一日D值 × (1 - a) + 当日K值 × a (一般a取0.2)

  - J值(J)
    1. 衡量K值与D值距离的平均值,判断K线与D线背离程度。
    2. 当日J = (当日K+前一日K+前一日D)⁄3

  - 指标意义:
    1. K>D表示空头势头较弱或已转弱
    2. K<D表示多头势头较强
    3. K线上穿或下破D线,即K与D背离,可以看作趋势结束或变化的信号

- 布林线指标(Bollinger Bands)
  - 布林线指标是John Bollinger在1986年提出的一种易用且有效的趋势通道指标。是由中轨线和上轨线和下轨线组成。

  - 布林线指标计算公式:
    - 上轨:20日均线+2倍标准差
    - 中轨:20日均线
    - 下轨:20日均线-2倍标准差
    - 标准差:标准差可以反映一个数据集的离散程度
      - 标准差公式:Σ(收盘价-MA(N日平均线))2/N [N日所有收盘价-N日平均线 所得差开平方的总和 再除以N 得到的结果开根号]
      eg:则:
      Σ(收盘价-MA)2 = (10-15)2 + (11-15)2 + ...+(28-15)2
      Σ(收盘价-MA)2 / 20 = 和/20
      标准差 = √和/20

  - 布林线指标意义:
    1. 由一条20日均线和标准差线组成上下界形成的通道。
    2. 标准差线一般取2倍标准差,表示价格波动98%时间范围内的上下波动空间。
    3. 当价格上行突破上轨或下跌破下轨,反映趋势可能将要改变。
    4. 中轨即20日均线,可以观察价格与均线的关系来判断多空趋势。
    5. 通道越窄,表明价格波动趋于平稳;越宽,则波动动较大。
    6. 价格带来回于通道内,反映短期震荡趋势;一直保持在通道内表现强势趋势。
    7. 常用在趋势判断、震荡发现、买入点挖掘、止损点确定等多种交易策略中。
  - 布林线指标应用:
    - 喇叭口研判:https://www.zhihu.com/question/384284854
      1. 开口型:开口型喇叭口预示着一方力量逐渐强大而一方力量逐步衰竭，价格将处于短期单向行情中，方向则一般由盘整时所处的位置决定，例如高位盘整开口一般意味着暴跌，低位盘整则一般意味着暴涨.
      开口型喇叭口形态的形成必须具备两个条件。
      其一，长时间的横盘整理，整理时间越长、上下轨之间的距离越小则未来波动的幅度越大；
      其二，布林线开口时要有明显的大的成交量出现。
      开口喇叭口形态的确立是以K线向上突破上轨线、价格带量向上突破中长期均线为准
      2. 收口型:经历上涨后收口型喇叭口预示着空头力量逐渐强大而多头力量开始衰竭，价格将处于短期大幅下跌的行情之中。经历下跌后的收口型喇叭口则相反。收口型喇叭口形态的形成虽然对成交量没有要求。
      收口型喇叭具备一个条件，即价格经过前期大幅的短线拉升，拉升的幅度越大、上下轨之间的距离越大则未来下跌幅度越大。上涨后收口型喇叭口形态的确立是以价格的上轨线开始掉头向下、价格向下跌破短期均线为准。
      3. 紧口型:紧口型喇叭口预示着多空双方的力量逐步处于平衡，价格将处于长期横盘整理的行情中
      紧口型喇叭口形态的形成条件和确认标准比较宽松，只要价格经过较长时间的大幅波动后，成交极度萎缩，上下轨之间的距离越来越小的时候就可认定紧口型喇叭初步形成。当紧口型喇叭口出现后，投资者既可以观望等待，也可以少量建仓。BOLL线还可以配合判断M头和W底，以W底为例，主要是看左底和右底在布林线中处于何种相对位置上。一般来说，W底的左底会触及下轨线甚至跌破下轨线，但右底却大多是收在布林线下轨线之内，跌破下轨线的时候较少。当价格第一次下跌时，价格跌破布林线下轨线，但随后的反弹却比较强劲，价格不仅越过了布林线的中轨，且能上摸至上轨线；当价格第二次下跌时，没有跌破布林线的下轨线，而是与下轨线有一小段距离，受到下轨线的有力支撑，并再次出现了强劲反弹。从二次下探过程中，我们看到，价格的每次下探是逐步与布林线下轨线拉开距离的，这表明布林线显示市场人气在逐渐地增强，在酝酿着转机。

- RSI指标(相对强弱指数)

  - 指数含义:衡量价格上涨或者下跌动能的技术指标
  - 计算公式:RSI＝[上升平均数÷(上升平均数＋下跌平均数)]×100
    - 上升平均数:N日价格的上涨平均数
    - 下跌平均数:N日价格的下跌平均数
  - 应用:RSI最基本的用法是在指标自下而上突破30点时寻找买入，或者在指标自上而下跌破70时卖出。 该策略是押注市场行情会在强弱间切换，当趋势过强时去捕捉向下的转折点，而当趋势太弱时定位向上的突破机会

- MACD策略(Moving Average Convergence Divergence 移动平均线收敛与发散策略)
  - MACD指标含义:通过计算较长时间和较短时间指数移动平均线的差异,来衡量股票近期价格动能的强弱。
  - MACD指标计算公式:MACD＝(ema12- ema26) / (ema12 + ema26) * 200 + ema12 其中ema12为12日指数移动平均线,ema26为26日指数移动平均线
  